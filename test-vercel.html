<!DOCTYPE html>
<html>
<head>
    <title>Teste Vercel - KeyAuth</title>
    <style>
        body { 
            font-family: Arial; 
            padding: 20px; 
            background: #1a1a1a; 
            color: white; 
            text-align: center;
        }
        .status { 
            padding: 20px; 
            margin: 10px; 
            border-radius: 8px; 
            font-size: 18px;
        }
        .success { background: #22c55e; }
        .error { background: #ef4444; }
        .info { background: #3b82f6; }
        button { 
            padding: 15px 30px; 
            margin: 10px; 
            background: #3b82f6; 
            color: white; 
            border: none; 
            border-radius: 8px; 
            cursor: pointer; 
            font-size: 16px;
        }
    </style>
</head>
<body>
    <h1>üß™ Teste KeyAuth - Vercel</h1>
    <p>Este arquivo testa se o sistema est√° funcionando na Vercel.</p>
    
    <div id="status" class="status info">
        ‚è≥ Iniciando testes...
    </div>
    
    <button onclick="testLocalStorage()">Testar localStorage</button>
    <button onclick="testUserCreation()">Testar Cria√ß√£o de Usu√°rio</button>
    <button onclick="openMainSystem()">Abrir Sistema Principal</button>
    
    <div id="results"></div>

    <script>
        function updateStatus(message, type = 'info') {
            const status = document.getElementById('status');
            status.textContent = message;
            status.className = `status ${type}`;
        }

        function addResult(message, type = 'info') {
            const div = document.createElement('div');
            div.className = `status ${type}`;
            div.textContent = message;
            document.getElementById('results').appendChild(div);
        }

        function testLocalStorage() {
            updateStatus('üîç Testando localStorage...', 'info');
            
            try {
                // Teste b√°sico
                localStorage.setItem('test_vercel', 'funcionando');
                const result = localStorage.getItem('test_vercel');
                
                if (result === 'funcionando') {
                    updateStatus('‚úÖ localStorage funcionando perfeitamente!', 'success');
                    localStorage.removeItem('test_vercel');
                } else {
                    updateStatus('‚ùå localStorage n√£o est√° funcionando', 'error');
                }
            } catch (e) {
                updateStatus('‚ùå Erro no localStorage: ' + e.message, 'error');
            }
        }

        function testUserCreation() {
            updateStatus('üë§ Testando cria√ß√£o de usu√°rio...', 'info');
            
            try {
                // Simular cria√ß√£o de usu√°rio
                const testUser = {
                    id: Date.now().toString(),
                    username: 'teste_vercel',
                    email: 'teste@vercel.com',
                    password: 'hash123',
                    createdAt: new Date().toISOString()
                };
                
                const users = [testUser];
                localStorage.setItem('keyauth_users_test', JSON.stringify(users));
                
                const loaded = JSON.parse(localStorage.getItem('keyauth_users_test'));
                
                if (loaded.length === 1 && loaded[0].username === 'teste_vercel') {
                    updateStatus('‚úÖ Cria√ß√£o de usu√°rio funcionando!', 'success');
                    localStorage.removeItem('keyauth_users_test');
                } else {
                    updateStatus('‚ùå Problema na cria√ß√£o de usu√°rio', 'error');
                }
            } catch (e) {
                updateStatus('‚ùå Erro na cria√ß√£o de usu√°rio: ' + e.message, 'error');
            }
        }

        function openMainSystem() {
            // Redirecionar para o sistema principal
            window.location.href = './index.html';
        }

        // Teste inicial autom√°tico
        setTimeout(() => {
            updateStatus('üöÄ Testes conclu√≠dos! Clique nos bot√µes para testar.', 'success');
        }, 1000);

        // Verificar se estamos na Vercel
        if (window.location.hostname.includes('vercel.app')) {
            addResult('üåê Detectado: Rodando na Vercel!', 'success');
        } else if (window.location.hostname === 'localhost') {
            addResult('üíª Detectado: Rodando localmente', 'info');
        } else {
            addResult('üåç Detectado: Rodando em: ' + window.location.hostname, 'info');
        }
    </script>
</body>
</html>